<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nail Master –ó–∞–ø–∏—Å—å</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 min-h-screen">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // =================================================================
        // üëáüëáüëá –ù–ê–°–¢–†–û–ô–ö–ò (–í–°–¢–ê–í–¨ –°–í–û–ò –î–ê–ù–ù–´–ï –°–Æ–î–ê) üëáüëáüëá
        // =================================================================
        
        // 1. –¢–≤–æ–π —Ç–æ–∫–µ–Ω –æ—Ç BotFather
        const TG_BOT_TOKEN = "8581694314:AAFyOqGsKdAANCy_WuOtrP_8O6th-Tqne4k"; 
        
        // 2. –¢–≤–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π ID (—á–∏—Å–ª–æ)
        const TG_CHAT_ID = "6744712545";      
        
        // 3. –°—Å—ã–ª–∫–∞ –Ω–∞ Google Script (Deployment URL)
        // –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ /exec
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyp64kfADN--ddoIrHx8US713BIV4R7B26pFRa6Nbpc3_9HcsEUI3ggjyARgzAzJNnR0w/exec"; 

        // =================================================================

        const NailSalonApp = () => {
            const [currentView, setCurrentView] = useState('login');
            const [currentUser, setCurrentUser] = useState(null);
            
            // –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–∏–º–µ—Ä)
            const schedule = {
                '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫': ['10:00', '12:00', '14:00', '16:00', '18:00'],
                '–í—Ç–æ—Ä–Ω–∏–∫': ['10:00', '12:00', '14:00', '16:00', '18:00'],
                '–°—Ä–µ–¥–∞': ['10:00', '12:00', '14:00', '16:00', '18:00'],
                '–ß–µ—Ç–≤–µ—Ä–≥': ['10:00', '12:00', '14:00', '16:00', '18:00'],
                '–ü—è—Ç–Ω–∏—Ü–∞': ['10:00', '12:00', '14:00', '16:00'],
                '–°—É–±–±–æ—Ç–∞': ['11:00', '13:00', '15:00'],
                '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ': ['12:00', '14:00']
            };

            // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤ (–¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)
            const [bookedSlots, setBookedSlots] = useState([]);

            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            const [regForm, setRegForm] = useState({ firstName: '', phone: '' });

            // --- –õ–û–ì–ò–ö–ê –û–¢–ü–†–ê–í–ö–ò ---
            const sendNotifications = async (day, time, user) => {
                const message = `üíÖ *–ù–û–í–ê–Ø –ó–ê–ü–ò–°–¨!*\n\n` +
                                `üë§ –ö–ª–∏–µ–Ω—Ç: ${user.firstName}\n` +
                                `üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${user.phone}\n` +
                                `üìÖ –î–∞—Ç–∞: ${day}\n` +
                                `‚è∞ –í—Ä–µ–º—è: ${time}`;

                // 1. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
                if (TG_BOT_TOKEN !== "–í–°–¢–ê–í–¨_–°–Æ–î–ê_–¢–û–ö–ï–ù") {
                    try {
                        await fetch(`https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage`, {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify({
                                chat_id: TG_CHAT_ID,
                                text: message,
                                parse_mode: 'Markdown'
                            })
                        });
                        console.log("Telegram –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω");
                    } catch (e) { console.error("–û—à–∏–±–∫–∞ TG:", e); }
                }

                // 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Google –¢–∞–±–ª–∏—Ü—É
                if (GOOGLE_SCRIPT_URL !== "–í–°–¢–ê–í–¨_–°–Æ–î–ê_–°–°–´–õ–ö–£_GOOGLE_SCRIPT") {
                    try {
                        await fetch(GOOGLE_SCRIPT_URL, {
                            method: 'POST',
                            mode: 'no-cors', // –í–∞–∂–Ω–æ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ—à–∏–±–∫–∏ 302/CORS
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                date: new Date().toLocaleString(),
                                name: user.firstName,
                                username: user.phone, // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω –∫–∞–∫ username
                                id: Math.floor(Math.random() * 10000) // –°–ª—É—á–∞–π–Ω—ã–π ID
                            })
                        });
                        console.log("Google –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω");
                    } catch (e) { console.error("–û—à–∏–±–∫–∞ Google:", e); }
                }
            };

            const handleLogin = () => {
                if(regForm.firstName && regForm.phone) {
                    setCurrentUser(regForm);
                    setCurrentView('dashboard');
                } else {
                    alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω!");
                }
            };

            const handleBooking = (day, time) => {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–µ –∑–∞–Ω—è—Ç–æ –ª–∏ —É–∂–µ (–≤–∏–∑—É–∞–ª—å–Ω–æ)
                if(bookedSlots.some(s => s.day === day && s.time === time)) {
                    return; 
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –≤ "–∑–∞–Ω—è—Ç–æ"
                setBookedSlots([...bookedSlots, { day, time }]);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω—É
                sendNotifications(day, time, currentUser);

                alert(`‚úÖ –í—ã –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ ${day} –≤ ${time}!\n–ú–∞—Å—Ç–µ—Ä —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.`);
            };

            // --- –≠–ö–†–ê–ù–´ ---

            // 1. –í–•–û–î / –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø
            if (currentView === 'login') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-4">
                        <div className="glass p-8 rounded-3xl shadow-2xl max-w-sm w-full text-center">
                            <div className="text-6xl mb-4">üíÖ</div>
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">Nail Master</h1>
                            <p className="text-gray-500 mb-8">–ó–∞–ø–∏—Å—å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä –æ–Ω–ª–∞–π–Ω</p>
                            
                            <input 
                                type="text" 
                                placeholder="–í–∞—à–µ –ò–º—è" 
                                className="w-full p-3 rounded-xl border border-pink-200 mb-4 focus:outline-none focus:ring-2 focus:ring-pink-400"
                                value={regForm.firstName}
                                onChange={e => setRegForm({...regForm, firstName: e.target.value})}
                            />
                            <input 
                                type="tel" 
                                placeholder="–í–∞—à –¢–µ–ª–µ—Ñ–æ–Ω" 
                                className="w-full p-3 rounded-xl border border-purple-200 mb-6 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                value={regForm.phone}
                                onChange={e => setRegForm({...regForm, phone: e.target.value})}
                            />
                            
                            <button 
                                onClick={handleLogin}
                                className="w-full py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl font-bold shadow-lg transform active:scale-95 transition"
                            >
                                –í–æ–π—Ç–∏
                            </button>
                        </div>
                    </div>
                );
            }

            // 2. –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
            if (currentView === 'dashboard') {
                return (
                    <div className="p-4 max-w-md mx-auto">
                        <div className="bg-white rounded-3xl shadow-xl p-6 mb-6">
                            <h2 className="text-2xl font-bold text-gray-800">–ü—Ä–∏–≤–µ—Ç, {currentUser.firstName}! üëã</h2>
                            <p className="text-gray-500">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É –∏–ª–∏ –≤—Ä–µ–º—è</p>
                        </div>

                        <button 
                            onClick={() => setCurrentView('booking')}
                            className="w-full py-6 mb-4 bg-gradient-to-r from-pink-400 to-red-400 text-white rounded-2xl font-bold text-xl shadow-lg flex items-center justify-center gap-2 transform active:scale-95 transition"
                        >
                            üìÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                        </button>

                        <button 
                            className="w-full py-6 mb-4 bg-gradient-to-r from-purple-400 to-indigo-400 text-white rounded-2xl font-bold text-xl shadow-lg flex items-center justify-center gap-2 transform active:scale-95 transition"
                            onClick={() => alert("–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏–π")}
                        >
                            üéÅ –ê–∫—Ü–∏–∏
                        </button>
                        
                        <div className="text-center mt-8">
                             <button onClick={() => setCurrentView('login')} className="text-gray-400 text-sm">–í—ã–π—Ç–∏</button>
                        </div>
                    </div>
                );
            }

            // 3. –í–´–ë–û–† –í–†–ï–ú–ï–ù–ò (–ó–ê–ü–ò–°–¨)
            if (currentView === 'booking') {
                return (
                    <div className="p-4 max-w-md mx-auto pb-10">
                        <div className="flex items-center mb-6">
                            <button onClick={() => setCurrentView('dashboard')} className="p-2 bg-white rounded-full shadow mr-4">‚¨ÖÔ∏è</button>
                            <h2 className="text-2xl font-bold text-gray-800">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</h2>
                        </div>

                        <div className="space-y-6">
                            {Object.entries(schedule).map(([day, times]) => (
                                <div key={day} className="bg-white rounded-2xl p-5 shadow-sm">
                                    <h3 className="font-bold text-lg text-pink-600 mb-3">{day}</h3>
                                    <div className="grid grid-cols-3 gap-2">
                                        {times.map(time => {
                                            const isBooked = bookedSlots.some(s => s.day === day && s.time === time);
                                            return (
                                                <button 
                                                    key={time}
                                                    disabled={isBooked}
                                                    onClick={() => handleBooking(day, time)}
                                                    className={`py-2 rounded-lg text-sm font-semibold transition ${
                                                        isBooked 
                                                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed' 
                                                        : 'bg-green-100 text-green-700 hover:bg-green-200'
                                                    }`}
                                                >
                                                    {isBooked ? '–ó–∞–Ω—è—Ç–æ' : time}
                                                </button>
                                            )
                                        })}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<NailSalonApp />);
    </script>
</body>
</html>
